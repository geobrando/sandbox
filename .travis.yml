sudo: false
language: ruby
before_install:
  - npm install -g geojsonhint
cache: bundler
branches:
  only:
    - master
rvm:
  - 2.1
script:
  - bundle exec httparty -f json "http://geojsonlint.com/validate?url=https://raw.githubusercontent.com/geobrando/sandbox/master/tests/geojson/good.geojson"
  - bundle exec httparty -f json "http://geojsonlint.com/validate?url=https://raw.githubusercontent.com/geobrando/sandbox/master/tests/geojson/bad.geojson"
  - geojsonhint --json < tests/geojson/good.geojson | tee >( if [ $(grep -F '"error":' | wc -w)  -gt 0 ]; then false; fi)
  - geojsonhint --json < tests/geojson/bad.geojson | tee >( if [ $(grep -F '"error":' | wc -w)  -gt 0 ]; then false; fi)
